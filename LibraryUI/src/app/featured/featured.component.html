<div class="example-container mat-elevation-z8">


  <mat-form-field>
    <mat-label>Search for your favorite titles</mat-label>
    <input matInput (keyup)="updateSearch($event)" #input>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Filter results by title, author, or description</mat-label>
    <input matInput (keyup)="applyFilter($event)" #input>
  </mat-form-field>

  <div class="example-table-container">

    <table mat-table [dataSource]="bookData" multiTemplateDataRows class="example-table"
           matSort matSortActive="created" matSortDisableClear matSortDirection="desc">
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

      <!--Cover Image Column-->
      <ng-container matColumnDef="cover">
        <th mat-header-cell *matHeaderCellDef>Cover Image</th>
        <td mat-cell *matCellDef="let row"><img class="book-cover" src={{row.coverImage}}></td>
      </ng-container>

      <!--Title Column-->
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
        <td mat-cell *matCellDef="let row">{{row.title | titlecase }}</td>
      </ng-container>

      <!--Author Column-->
      <ng-container matColumnDef="author">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Author</th>
        <td mat-cell *matCellDef="let row">{{row.author}}</td>
      </ng-container>

      <!--Description Column-->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let row">{{row.description}}</td>
      </ng-container>

      <!--Rating Column-->
      <ng-container matColumnDef="rating">
        <th mat-header-cell *matHeaderCellDef>Rating</th>
        <td mat-cell *matCellDef="let row">{{row.userRating}}</td>
      </ng-container>

      <!--Check Out Column-->
      <ng-container matColumnDef="checkOut">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Availability</th>
        <td mat-cell *matCellDef="let row">
          <button [disabled]="row.checkedOutBy != null" (click)="checkOutBook(row.id)">
          Check Out</button></td>
      </ng-container>


      <!--Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
      <ng-container matColumnDef="expandedDetail">
        <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
          <div class="example-element-detail"
               [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
            <div class="example-element-description">
              Publisher: {{element.publisher}} <br />
              Publication Date: {{element.publicationDate | date }} <br />
              Category: {{element.category}} <br />
              ISBN: {{element.isbn}} <br />
              Page Count: {{element.pageCount}} <br />
            </div>
          </div>
        </td>
      </ng-container>


      <tr mat-row *matRowDef="let element; columns: displayedColumns;"
          class="example-element-row"
          [class.example-expanded-row]="expandedElement === element"
          (click)="expandedElement = expandedElement === element ? null : element">
      </tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>


      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">" No data matching the filter "{{input.value}}"</td>
      </tr>

    </table>

  </div>
